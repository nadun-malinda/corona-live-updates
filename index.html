<!DOCTYPE html>
<html lang="en" class="h-100">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Covid19 Live Updates</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <link rel="stylesheet" href="./dist/bundle.css">
</head>
<body class="h-100">
    <div id="root" class="h-100"></div>
    
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
    <script src="./dist/bundle.js"></script>
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDNFKCHlR8vP6GkH_F3orqXUWpyXZ9ubco&callback=initMap"></script>
    <script>
        var geocoder;
        var map;
        function initMap() {
            console.log('initializing map..')
            // The location of Kandy 7.914514, 80.706414
            let kandy = {lat: 7.914514, lng: 80.706414};
            // geocoder = new google.maps.Geocoder();
            var bounds = new google.maps.LatLngBounds();
            map = new google.maps.Map(
                document.getElementById('map'), {
                    zoom: 8, 
                    center: kandy,
                    disableDefaultUI: true,
                    styles: [
                        {elementType: 'geometry', stylers: [{color: '#242f3e'}]},
                        {elementType: 'labels.text.stroke', stylers: [{color: '#242f3e'}]},
                        {elementType: 'labels.text.fill', stylers: [{color: '#746855'}]},
                        {
                        featureType: 'administrative.locality',
                        elementType: 'labels.text.fill',
                        stylers: [{color: '#d59563'}]
                        },
                        {
                        featureType: 'poi',
                        elementType: 'labels.text.fill',
                        stylers: [{color: '#d59563'}]
                        },
                        {
                        featureType: 'poi.park',
                        elementType: 'geometry',
                        stylers: [{color: '#263c3f'}]
                        },
                        {
                        featureType: 'poi.park',
                        elementType: 'labels.text.fill',
                        stylers: [{color: '#6b9a76'}]
                        },
                        {
                        featureType: 'road',
                        elementType: 'geometry',
                        stylers: [{color: '#38414e'}]
                        },
                        {
                        featureType: 'road',
                        elementType: 'geometry.stroke',
                        stylers: [{color: '#212a37'}]
                        },
                        {
                        featureType: 'road',
                        elementType: 'labels.text.fill',
                        stylers: [{color: '#9ca5b3'}]
                        },
                        {
                        featureType: 'road.highway',
                        elementType: 'geometry',
                        stylers: [{color: '#746855'}]
                        },
                        {
                        featureType: 'road.highway',
                        elementType: 'geometry.stroke',
                        stylers: [{color: '#1f2835'}]
                        },
                        {
                        featureType: 'road.highway',
                        elementType: 'labels.text.fill',
                        stylers: [{color: '#f3d19c'}]
                        },
                        {
                        featureType: 'transit',
                        elementType: 'geometry',
                        stylers: [{color: '#2f3948'}]
                        },
                        {
                        featureType: 'transit.station',
                        elementType: 'labels.text.fill',
                        stylers: [{color: '#d59563'}]
                        },
                        {
                        featureType: 'water',
                        elementType: 'geometry',
                        stylers: [{color: '#17263c'}]
                        },
                        {
                        featureType: 'water',
                        elementType: 'labels.text.fill',
                        stylers: [{color: '#515c6d'}]
                        },
                        {
                        featureType: 'water',
                        elementType: 'labels.text.stroke',
                        stylers: [{color: '#17263c'}]
                        }
                    ]
                });

            let hospitals = [
                {lat: 6.922838, lng: 79.918205},
                {lat: 6.919002, lng: 79.869004},
                {lat: 7.029394, lng: 79.924093},
                {lat: 6.067329, lng: 80.226063},
                {lat: 8.325041, lng: 80.414011},
                {lat: 7.479366, lng: 80.359104},
                {lat: 9.662908, lng: 80.021394},
                {lat: 7.287860, lng: 80.632253},
                {lat: 7.708287, lng: 81.690633}, //TH – Batticaloa
            ];

            for (let i=0; i<hospitals.length; i++) {
                let marker = new google.maps.Marker({
                    map: map,
                    position: hospitals[i],
                    title: 'Uluru (Ayers Rock)'
                });

                bounds.extend(marker.position);

            }
            // codeAddress(0);
        }

        function codeAddress(i) {
            let addresses = [
                'National Institute of Infectious Diseases',
                'National Hospital Sri Lanka',
                'TH - Ragama',
                'TH - Karapitiya',
                'TH - Anuradhapura',
                'TH - Kurunegala',
                'TH- Jaffna',
                'National Hospital Kandy',
                'TH – Batticaloa',
                'DGH- Gampaha',
                'DGH – Negombo',
                'TH – Rathnapura',
                'PGH – Badulla',
                'LRH',
                'DMH',
                'DGH – Polonnaruwa',
                'TH - Kalubowila',
                'Castle Street Teaching Hospital'
            ];
            geocoder.geocode({
                'address': addresses[i],
                'componentRestrictions': {
                    country: 'LK'
                }
            }, function(results, status) {
                if (status == 'OK') {
                    var marker = new google.maps.Marker({
                        map: map,
                        position: results[0].geometry.location
                    });
                } else {
                    // alert('Geocode was not successful for the following reason: ' + status);
                }

                i++;
                if (i < addresses.length) {
                    codeAddress(i)
                }
            });
        }
    </script>
</body>
</html>